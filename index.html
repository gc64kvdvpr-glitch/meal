<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ê¸‰ì‹</title>
    <style>
        /* ë…¸ì…˜ì— ì–´ìš¸ë¦¬ëŠ” ê¹”ë”í•œ ë””ìì¸ */
        body { margin: 0; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #ffffff; color: #37352f; }
        .container { max-width: 100%; }
        h3 { margin: 0 0 10px 0; font-size: 16px; color: #eb5757; } /* í¬ì¸íŠ¸ ì»¬ëŸ¬ */
        .menu { font-size: 14px; line-height: 1.6; white-space: pre-wrap; }
        .loading { color: #888; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h3>ğŸ± ì˜¤ëŠ˜ì˜ ê¸‰ì‹</h3>
        <div id="meal-box" class="menu">
            <span class="loading">ê¸‰ì‹ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
        </div>
    </div>

    <script>
        const API_KEY = 'ì¸ì¦í‚¤ê°€_ì—†ì–´ë„_í…ŒìŠ¤íŠ¸ëŠ”_ë©ë‹ˆë‹¤'; 
        const EDU_CODE = 'J10'; // ê²½ê¸°ë„êµìœ¡ì²­
        const SCH_CODE = '7531123'; // ì†¡ì–‘ê³ ë“±í•™êµ
        
        // ì˜¤ëŠ˜ ë‚ ì§œ êµ¬í•˜ê¸° (YYYYMMDD í˜•ì‹)
        const today = new Date();
        const year = today.getFullYear();
        const month = ('0' + (today.getMonth() + 1)).slice(-2);
        const day = ('0' + today.getDate()).slice(-2);
        const dateStr = `${year}${month}${day}`;

        // ë‚˜ì´ìŠ¤ API í˜¸ì¶œ URL
        const url = `https://open.neis.go.kr/hub/mealServiceDietInfo?Type=json&ATPT_OFCDC_SC_CODE=${EDU_CODE}&SD_SCHUL_CODE=${SCH_CODE}&MLSV_YMD=${dateStr}`;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const mealBox = document.getElementById('meal-box');
                try {
                    // ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
                    if (data.mealServiceDietInfo) {
                        const rawMenu = data.mealServiceDietInfo[1].row[0].DDISH_NM;
                        // ë³´ê¸° ì‹«ì€ ì•Œë ˆë¥´ê¸° ì •ë³´(ìˆ«ì+ê´„í˜¸)ì™€ ì¤„ë°”ê¿ˆ íƒœê·¸ ì •ë¦¬
                        const cleanMenu = rawMenu.replace(/\([0-9\.]+\)/g, '').replace(/<br\/>/g, '\n');
                        mealBox.innerText = cleanMenu;
                    } else {
                        mealBox.innerText = "ì˜¤ëŠ˜ì€ ê¸‰ì‹ì´ ì—†ìŠµë‹ˆë‹¤.";
                    }
                } catch (e) {
                    mealBox.innerText = "ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                }
            })
            .catch(error => {
                document.getElementById('meal-box').innerText = "í†µì‹  ì—ëŸ¬ ë°œìƒ";
            });
    </script>
</body>
</html>
